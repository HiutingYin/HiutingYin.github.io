---
title: 快速学习正则表达式
author: HiuTingYin
math: true
mermaid: true
date: 2021-12-28 11:18:00 +0800
categories: 
- PHP
tags:
- 读书笔记 
- PHP
---

## 什么是正则表达式

1.What(是什么): 正则表达式是一个字符串格式的规则。

2.Why(为什么要用)：在表单验证或者处理文本时，准确地进行某种规则校验。

3.Where/When（在什么地方什么时候运用）: 

①测试字符串的某个模式。例如，可以输入一个字符串进行测试看该字符串中是否存在一个电话号码模式或者一个信用卡模式，这成为数据的有效性检验。

②替换文本。可以在文档中使用一个正则表达式来表示特定文字，然后可以将其全部删除或者替换成别的文字。

③根据模式匹配从字符串中提取一个子字符串。可以用来在文本或者输入字段中查找特定的文字。

以上3点可以简要概括为：**1、匹配啥？2、匹配不是啥？3、匹配多少次？**

### 1、匹配啥？

比如想匹配字符 `盼望`，那就直接写 `/盼望/`
```php
$str = '盼望着，盼望着，东风来了，春天的脚步近了。';
//匹配包含 盼望 字符
preg_match_all('/盼望/', $str, $match);
var_dump($match);
//替换所有 盼望 字符为 看
$res = preg_replace('/盼望/', '看', $str);
var_dump($res);

结果
array(1) {
  [0]=>
  array(2) {
    [0]=>
    string(6) "盼望"
    [1]=>
    string(6) "盼望"
  }
}
string(57) "看着，看着，东风来了，春天的脚步近了。"
```


匹配以 `盼望` 开头的字符串，就加上元字符^（开始位置标识），`/^盼望/`：
```php
$str = '盼望着，盼望着，东风来了，春天的脚步近了。';
//匹配包含 盼望 字符
preg_match_all('/^盼望/', $str, $match);
var_dump($match);
//替换所有 盼望 字符为 看
$res = preg_replace('/^盼望/', '看', $str);
var_dump($res);

结果
array(1) {
  [0]=>
  array(1) {
    [0]=>
    string(6) "盼望"
  }
}
string(60) "看着，盼望着，东风来了，春天的脚步近了。"
```

匹配以 `盼望` 结尾的字符串，就加上元字符$（结束位置标识），`/盼望$/`：

```php
$str = '盼望着，盼望着，东风来了，春天的脚步近了。盼望';
//匹配包含 盼望 字符
preg_match_all('/盼望$/', $str, $match);
var_dump($match);
//替换所有 盼望 字符为 看
$res = preg_replace('/盼望$/', '看', $str);
var_dump($res);

结果
array(1) {
  [0]=>
  array(1) {
    [0]=>
    string(6) "盼望"
  }
}
string(66) "盼望着，盼望着，东风来了，春天的脚步近了。看"
```

匹配字符串 `东风`或`春天`，可以把用|分割 `/东风|春天/`，只要字符串包含`东风`或者`春天`就可以匹配上：
```php
$str = '盼望着，盼望着，东风来了，春天的脚步近了。';
//匹配包含 东风|春天 字符
preg_match_all('/东风|春天/', $str, $match);
var_dump($match);
//替换所有 东风|春天 替换为 春
$res = preg_replace('/东风|春天/', '春', $str);
var_dump($res);

结果
array(1) {
   [0]=>
   array(2) {
     [0]=>
     string(6) "东风"
     [1]=>
     string(6) "春天"
   }
 }
string(57) "盼望着，盼望着，春来了，春的脚步近了。"
```

匹配字符`h`或`w`，可以把对应的字符放入中括号里`/[hw]/`，只要字符串包含a或者b就可以匹配上：
```php
$str = 'hello world';
preg_match_all('/[hw]/', $str, $match);

结果：
array(1) {
  [0]=>
  array(2) {
    [0]=>
    string(1) "h"
    [1]=>
    string(1) "w"
  }
}
```
+ 1.匹配啥前面的（使用前瞻）
> 前瞻定义 `(?=exp)`：匹配一个位置，这个位置后面是exp
> `exp1(?=exp2)`：匹配exp2前面的exp1，匹配结果不包含exp2

比如要匹配字符串中helloworld，world前面的部分hello， `/hello(?=world)/`
```php
$strs = ['helloworld','hellow','hello world','end world'];
foreach ($strs as $str){
    preg_match('/hello(?=world)/', $str, $match);
    var_dump($match);
}

结果：
//只有第一个 helloworld 匹配，即使 hello world 有空格，但是也不满足条件
array(1) {
  [0]=>
  string(5) "hello"
}
array(0) {
}
array(0) {
}
array(0) {
}
```

+ 2.匹配啥后面的（使用后顾）
> 后顾定义 `(?<=exp)` ： 匹配一个位置，这个位置前面是exp
> `(?<=exp2)exp1`：匹配exp2后面的exp1，匹配结果不包含exp2

比如要匹配字符串中helloworld，hello后面的world，`/(?<=hello)world/`
```php
$strs = ['helloworld','hellow','hello world','end world'];
foreach ($strs as $str){
    preg_match('/(?<=hello)world/', $str, $match);
    var_dump($match);
}

结果：
//只有第一个 helloworld 匹配，即使 hello world 有空格，但是也不满足条件
array(1) {
  [0]=>
  string(5) "world"
}
array(0) {
}
array(0) {
}
array(0) {
}
```
### 2、匹配不是啥？

## 参考

- [1] [三十分钟包会——正则表达式](https://juejin.cn/post/6939854031787393031)